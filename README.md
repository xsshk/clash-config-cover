# Clash Config Script

ä¸€ä¸ªåŸºäº Cloudflare Workers çš„è®¢é˜…è½¬æ¢ api æœåŠ¡ï¼Œç”¨äºå°†æœºåœºè®¢é˜…è½¬æ¢ä¸ºä¼˜åŒ–çš„ Clash é…ç½®æ–‡ä»¶ï¼Œå¹¶æä¾› token è®¢é˜…ç®¡ç†ã€‚

[![Deploy to Cloudflare](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https%3A%2F%2Fgithub.com%2Fjctaoo%2FClashConfig)

## âœ¨ ç‰¹æ€§

- ğŸš€ **æ— æœåŠ¡å™¨éƒ¨ç½²**: åŸºäº Cloudflare Workersï¼Œå…¨çƒåŠ é€Ÿè®¿é—®
- ğŸ“¦ **è·¨å¹³å°ä½¿ç”¨**: æ”¯æŒ **Clash.Meta** å’Œ **Clash Premium** (Stash App) å†…æ ¸
- ğŸ¯ **æ™ºèƒ½è§„åˆ™**: å†…ç½®ä¼˜åŒ–çš„åˆ†æµè§„åˆ™ï¼Œæ”¯æŒ GEOIPã€GEOSITE æ•°æ®ï¼Œå¤š DNS ä¸åˆ†æµè§„åˆ™å¯é…ç½®
- ğŸ”’ **å®‰å…¨çš„ç½‘ç»œä½“éªŒ**: é¿å… DNS æ³„éœ²
- ğŸŒ **åœ°åŒºç­›é€‰**: æ”¯æŒæŒ‰åœ°åŒºè¿‡æ»¤èŠ‚ç‚¹
- ğŸ” **Token ç®¡ç†**: æ”¯æŒ Token è®¢é˜…ç®¡ç†ï¼Œå¯é…ç½®èŠ‚ç‚¹è¿‡æ»¤ï¼Œfeel free to share token with your friends
- âš™ï¸ **CLI å·¥å…·**: æä¾›å‘½ä»¤è¡Œå·¥å…·ï¼Œæ–¹ä¾¿ç®¡ç†è®¢é˜…å’Œç”Ÿæˆ token
- ğŸ“’ **ç”Ÿæˆè„šæœ¬**: æ”¯æŒç”Ÿæˆå…¨å±€æ‰©å±•è„šæœ¬ï¼Œé€‚é… Clash Verge ç­‰å®¢æˆ·ç«¯
- ğŸ® **è£¸æ ¸å¿ƒæ”¯æŒ**: æ”¯æŒç›´æ¥ä½¿ç”¨ Clash æ ¸å¿ƒè¿è¡Œï¼Œæ— éœ€å®¢æˆ·ç«¯ UI

## âš¡ å¿«é€Ÿå¼€å§‹

æ‰“å¼€ [https://clash.jctaoo.site](https://clash.jctaoo.site) æ¥ä½¿ç”¨, æˆ–è€…å°†åŸå§‹è®¢é˜…é“¾æ¥è½¬æ¢ä¸º base64 ç¼–ç åï¼Œç›´æ¥ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥ä½œä¸ºè®¢é˜… URL

```txt
https://clash.jctaoo.site/sub?sub=<base64-encoded-url>
```

> æ›´è¿›ä¸€æ­¥ï¼Œå¯ä»¥ä½¿ç”¨åŸºäº token ç®¡ç†çš„é…ç½®è·å– APIï¼Œæ”¯æŒç­›é€‰èŠ‚ç‚¹ç­‰åŠŸèƒ½ï¼Œå‚è€ƒä¸‹æ–¹ API æŒ‡å—

## ğŸ–¥ï¸ API æŒ‡å—

### ğŸ“± User-Agent è¯´æ˜

ClashConfig ä¼š**æ ¹æ®è¯·æ±‚çš„ User-Agent è‡ªåŠ¨è¯†åˆ«å®¢æˆ·ç«¯ç±»å‹**ï¼Œå¹¶è¿”å›å¯¹åº”å†…æ ¸çš„ä¼˜åŒ–é…ç½®ï¼š

#### æ”¯æŒçš„å®¢æˆ·ç«¯å†…æ ¸

1. **Clash.Meta (Mihomo)**:
   - å®¢æˆ·ç«¯ï¼šClash Vergeã€ClashX.Meta ç­‰
   - è¿”å›ï¼šå®Œæ•´çš„ Mihomo å†…æ ¸é…ç½®ï¼ŒåŒ…å«æ‰€æœ‰é«˜çº§ç‰¹æ€§

2. **Clash Premium (Stash)**
   - å®¢æˆ·ç«¯ï¼šStash
   - è¿”å›ï¼šå…¼å®¹ Stash çš„é…ç½®ï¼Œè‡ªåŠ¨å±•å¼€ `GEOSITE` è§„åˆ™ä¸ºå…·ä½“åŸŸååˆ—è¡¨ (nameserver-policy ä¸­)
   - **ç‰¹æ®Šå¤„ç†**ï¼šç”±äº Stash é™åˆ¶ï¼Œ`strict` DNS ç­–ç•¥ä¼šè‡ªåŠ¨é™çº§ä¸º `direct` ç­–ç•¥

#### è£¸æ ¸å¿ƒä½¿ç”¨æ–¹æ³•

å¦‚æœä½ ç›´æ¥ä½¿ç”¨ Clash æ ¸å¿ƒï¼ˆå¦‚ `mihomo`ï¼‰è€Œä¸æ˜¯å¸¦ UI çš„å®¢æˆ·ç«¯ï¼Œéœ€è¦**æ‰‹åŠ¨æŒ‡å®š User-Agent**, å°† `mihomo -v` å‘½ä»¤çš„ç¬¬ä¸€è¡Œè¿”å›å€¼ä½œä¸º User-Agent ä½¿ç”¨å³å¯ï¼Œä¾‹å¦‚:

```bash
> ./mihomo.exe -v
Mihomo Meta v1.19.14 windows amd64 with go1.24.7 Wed Sep 24 09:12:02UTC 2025
Use tags: with_gvisor
```

å°† `Mihomo Meta v1.19.14 windows amd64 with go1.24.7 Wed Sep 24 09:12:02UTC 2025` ä½œä¸º User-Agent è¿›è¡Œè¯·æ±‚å³å¯ã€‚

> ğŸ’¡ **æç¤º**ï¼šå¤§å¤šæ•° Clash å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å‘é€æ­£ç¡®çš„ User-Agentï¼Œæ— éœ€æ‰‹åŠ¨è®¾ç½®

### 1. `/sub` - åŸºç¡€è®¢é˜…è½¬æ¢

**åŠŸèƒ½**: å°†æœºåœºè®¢é˜…åœ°å€è½¬æ¢ä¸ºä¼˜åŒ–åçš„ Clash é…ç½®

**å‚æ•°**:

- `sub` (å¿…éœ€): Base64 ç¼–ç çš„è®¢é˜… URL
- `convert` (å¯é€‰): æ˜¯å¦è¿›è¡Œé…ç½®ä¼˜åŒ–ï¼Œé»˜è®¤ `true`ï¼Œè®¾ç½®ä¸º `false` åˆ™åŸæ ·è¿”å›ä¸Šæ¸¸è®¢é˜…å¹¶è½¬æ¢ä¸ºå®¢æˆ·ç«¯éœ€è¦çš„æ ¼å¼
- `regions` (å¯é€‰): åŸºäºåœ°åŒºèŠ‚ç‚¹è¿‡æ»¤ï¼Œä½¿ç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼š`HK,US,JP`
- `rate` (å¯é€‰): åŸºäºè®¡è´¹å€ç‡è¿‡æ»¤ï¼Œåªä¿ç•™è®¡è´¹å€ç‡å°äºç­‰äºè¯¥å€¼çš„èŠ‚ç‚¹ï¼Œé»˜è®¤ä¸ºç©º
- `filter` (å¯é€‰): èŠ‚ç‚¹åç§°è¿‡æ»¤æ­£åˆ™ï¼Œç§»é™¤æ‰ä¸ç¬¦åˆè¯¥æ­£åˆ™çš„èŠ‚ç‚¹ï¼Œè¯¥å‚æ•°ä¼šä¼ å…¥ js çš„ `RegExp`ï¼Œé»˜è®¤ä¸ºç©º
- `nameserver` (å¯é€‰): è®¾ç½® dns nameserver ç»„, æ”¯æŒ `direct` å’Œ `strict`ï¼Œé»˜è®¤ `strict`
- `rules` (å¯é€‰): æœªå‘½ä¸­è§„åˆ™æµé‡ dns è§£æç­–ç•¥ï¼Œæ”¯æŒ `always-resolve` å’Œ `remote`ï¼Œé»˜è®¤ `remote`
- `quic` (å¯é€‰): ç¦ç”¨ quicï¼Œé»˜è®¤ `true`
- `level` (å¯é€‰): æ—¥å¿—ç­‰çº§ï¼Œæ”¯æŒ `debug`, `info`, `warning`, `error`, `silent`ï¼Œé»˜è®¤ `warning`

> å‚è§ [å‚æ•°è¯´æ˜](#params) äº†è§£æ›´å¤š

**ä½¿ç”¨ç¤ºä¾‹**:

```txt
https://clash.jctaoo.site/sub?sub=<base64-encoded-url>
https://clash.jctaoo.site/sub?sub=<base64-encoded-url>&convert=false
```

### 2. `/:token` - Token è®¢é˜…

**åŠŸèƒ½**: ä½¿ç”¨ Token è·å–è®¢é˜…ï¼Œç›¸å½“äºçŸ­é“¾æ¥çš„æ•ˆæœï¼Œä¸ä¼šåœ¨ url ä¸Šæš´éœ²è®¢é˜…åœ°å€å’Œå‚æ•°ï¼Œå¯ä»¥é…ç½®è¿‡æ»¤èŠ‚ç‚¹ååˆ†äº«ç»™ä»–äººä½¿ç”¨

> å¤„äºå®‰å…¨è€ƒè™‘ï¼Œè¯¥æ¥å£çš„ Token ä»…èƒ½é€šè¿‡ cli å·¥å…·è¿›è¡Œç”Ÿæˆï¼Œå¹¶ä¸”æ”¯æŒè‡ªéƒ¨ç½²çš„æ–¹å¼ï¼Œå‚è§ [CLI å·¥å…·ä½¿ç”¨æŒ‡å—](#cli) å’Œ [éƒ¨ç½²](#deploy)

**å‚æ•°**:

- `token` (å¿…éœ€): é€šè¿‡ CLI å·¥å…·ç”Ÿæˆçš„ç”¨æˆ· Tokenï¼ˆæ ¼å¼: `sk-xxxxx`ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**:

``` txt
https://clash.jctaoo.site/sk-your-token
```

**ä½¿ç”¨æµç¨‹**:
1. ä½¿ç”¨ `pnpm run cli add` æ·»åŠ è®¢é˜…å¹¶è·å– token
2. å°† token æ·»åŠ åˆ° Clash è®¢é˜…åœ°å€: `https://clash.jctaoo.site/sk-your-token`
3. ä½¿ç”¨ CLI å·¥å…·ç®¡ç†å’Œæ›´æ–°è®¢é˜…é…ç½®

## ğŸ’¡ å®¢æˆ·ç«¯è¯´æ˜

- å¯ä»¥ä¸ºè®¢é˜…è®¾ç½®è‡ªåŠ¨æ›´æ–°ï¼Œ1440åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡
- clash-verge-rev: æ‰“å¼€ è™šæ‹Ÿç½‘å¡æ¨¡å¼ï¼Œå…³é—­ç³»ç»Ÿä»£ç†ï¼Œè™šæ‹Ÿç½‘å¡é…ç½®ä¸­ï¼Œå¼€å¯ ä¸¥æ ¼è·¯ç”±
- clashx.meta: æ ¹æ®å¦‚ä¸‹å›¾ç‰‡é…ç½®ï¼Œç„¶åä½¿ç”¨ tun æ¨¡å¼ï¼Œå…³é—­ç³»ç»Ÿä»£ç† ![clashx-meta](./clashx-meta.png)
  > https://github.com/MetaCubeX/ClashX.Meta/issues/103#issuecomment-2510050389
- å…¶ä»–å®¢æˆ·ç«¯: ä½¿ç”¨ tun æ¨¡å¼

<a id="deploy"></a>

## â˜ï¸ éƒ¨ç½²

ä½¿ç”¨ Cloudflare Workers å¿«é€Ÿéƒ¨ç½²ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å³å¯

[![Deploy to Cloudflare](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https%3A%2F%2Fgithub.com%2Fjctaoo%2FClashConfig)

<a id="cli"></a>

## ğŸ”§ CLI å·¥å…·ä½¿ç”¨æŒ‡å—

è¿™æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† Cloudflare KV ä¸­è®¢é˜…çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

### CLI å‘½ä»¤

#### 1. æ·»åŠ è®¢é˜…ï¼ˆäº¤äº’å¼ï¼‰

```bash
pnpm run cli add
```

è¯¥å‘½ä»¤ä¼šé€šè¿‡äº¤äº’å¼æç¤ºå¼•å¯¼ä½ è¾“å…¥æ‰€æœ‰å¿…è¦ä¿¡æ¯ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆ tokenã€‚å‚æ•°è¯´æ˜å‚è§ [å‚æ•°è¯´æ˜](#params)ã€‚

#### 2. è·å–è®¢é˜…ä¿¡æ¯

```bash
pnpm run cli get sk-your-token
```

è¯¥å‘½ä»¤ä¼šæ˜¾ç¤ºæŒ‡å®š token çš„è®¢é˜…è¯¦ç»†ä¿¡æ¯ã€‚Token ä¼šä¿å­˜åœ¨è®¢é˜…ä¿¡æ¯ä¸­ï¼Œå¯ä»¥éšæ—¶é€šè¿‡æ­¤å‘½ä»¤é‡æ–°è·å–ã€‚

#### 3. è·å–è®¢é˜…é“¾æ¥

```bash
# ä½¿ç”¨é»˜è®¤ base-url (https://clash.jctaoo.site)
pnpm run cli link sk-your-token

# è·å–é“¾æ¥å¹¶è‡ªåŠ¨åœ¨ Clash ä¸­æ‰“å¼€
pnpm run cli link sk-your-token --go
# æˆ–ä½¿ç”¨ç®€å†™
pnpm run cli link sk-your-token -g

# è‡ªå®šä¹‰ base-url
pnpm run cli link sk-your-token --base-url https://your-worker.workers.dev

# è‡ªå®šä¹‰ base-url å¹¶æ‰“å¼€
pnpm run cli link sk-your-token -b https://your-worker.workers.dev -g
```

è¯¥å‘½ä»¤ä¼šç”Ÿæˆå®Œæ•´çš„è®¢é˜…é“¾æ¥ã€‚ä½¿ç”¨ `--go`/`-g` å‚æ•°å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ Clash URL scheme å¹¶æ‰“å¼€ Clash å®¢æˆ·ç«¯å¯¼å…¥é…ç½®ã€‚

**å‚æ•°è¯´æ˜ï¼š**
- `--base-url` / `-b`: Worker éƒ¨ç½²çš„ base URLï¼ˆé»˜è®¤ï¼š`https://clash.jctaoo.site`ï¼‰
- `--go` / `-g`: ç”Ÿæˆ Clash URL scheme å¹¶è‡ªåŠ¨æ‰“å¼€ï¼ˆæ”¯æŒ Windows/macOS/Linuxï¼‰

#### 4. æ›´æ–°è®¢é˜…ï¼ˆä½¿ç”¨ç¼–è¾‘å™¨ï¼‰

```bash
pnpm run cli update sk-your-token
```

è¯¥å‘½ä»¤ä¼šæ‰“å¼€ä½ çš„é»˜è®¤ç¼–è¾‘å™¨ï¼Œæ˜¾ç¤ºå½“å‰è®¢é˜…ä¿¡æ¯çš„ JSON æ ¼å¼ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­ä¿®æ”¹ã€‚ä¿å­˜åä¼šè‡ªåŠ¨æ›´æ–°è®¢é˜…ã€‚å‚è§ [å‚æ•°è¯´æ˜](#params)ã€‚

#### 5. åˆ é™¤è®¢é˜…

```bash
pnpm run cli delete sk-your-token
```

#### 6. åˆ—å‡ºæ‰€æœ‰è®¢é˜…

```bash
pnpm run cli list
```

è¯¥å‘½ä»¤ä¼šåˆ—å‡ºæ‰€æœ‰å·²ä¿å­˜çš„è®¢é˜…ä¿¡æ¯ï¼ŒåŒ…æ‹¬ tokenã€æ ‡ç­¾ã€URL ç­‰å…³é”®ä¿¡æ¯ã€‚

### KV Key æ ¼å¼

- **ç”¨æˆ· Token æ ¼å¼**: `sk-{32ä½éšæœºåå…­è¿›åˆ¶å­—ç¬¦ä¸²}`
- **KV Key æ ¼å¼**: `kv:{SHA256(ç”¨æˆ·Token)}`
- **å­˜å‚¨å€¼**: JSON æ ¼å¼çš„ `ClashSubInformation` å¯¹è±¡

### ç¤ºä¾‹ï¼šå®Œæ•´å·¥ä½œæµ

```bash
# 1. æ·»åŠ è®¢é˜…
pnpm run cli add

# 2. æŸ¥çœ‹è®¢é˜…ä¿¡æ¯
pnpm run cli get sk-your-token

# 3. è·å–è®¢é˜…é“¾æ¥å¹¶åœ¨ Clash ä¸­æ‰“å¼€
pnpm run cli link sk-your-token --go

# 4. æ›´æ–°è®¢é˜…
pnpm run cli update sk-your-token

# 5. åˆ—å‡ºæ‰€æœ‰è®¢é˜…
pnpm run cli list

# 6. åˆ é™¤è®¢é˜…
pnpm run cli delete sk-your-token
```

### CLI æ³¨æ„äº‹é¡¹

1. **Token æŒä¹…åŒ–**: ç”Ÿæˆçš„ User Token ä¼šè‡ªåŠ¨ä¿å­˜åœ¨è®¢é˜…ä¿¡æ¯ä¸­ï¼Œå¯ä»¥éšæ—¶é€šè¿‡ `get` å‘½ä»¤é‡æ–°è·å–ï¼Œæ— éœ€æ‹…å¿ƒä¸¢å¤±
2. **KV å‘½åç©ºé—´**: é»˜è®¤ä½¿ç”¨ wrangler.jsonc ä¸­é…ç½®çš„ KV binding (é»˜è®¤ä¸º "KV")
3. **Wrangler ä¾èµ–**: éœ€è¦å®‰è£…å¹¶é…ç½® Wrangler CLI
4. **èº«ä»½éªŒè¯**: ç¡®ä¿å·²é€šè¿‡ `wrangler login` ç™»å½•åˆ° Cloudflare è´¦æˆ·


<a id="params"></a>

## ğŸ“ƒ å‚æ•°è¯´æ˜

| å‚æ•° | å­—æ®µ | è¯´æ˜ | é»˜è®¤å€¼ | æ˜¯å¦å¿…å¡« |
| --- | --- | --- | --- | --- |
| è®¢é˜…é“¾æ¥ | `sub` | base64 ç¼–ç çš„è®¢é˜… URL | æ—  | âœ… |
| æ˜¯å¦è¿›è¡Œé…ç½®ä¼˜åŒ– | `convert` | false åŸæ ·è¿”å›ä¸Šæ¸¸è®¢é˜…å¹¶è½¬æ¢ä¸ºå®¢æˆ·ç«¯éœ€è¦çš„æ ¼å¼ | true | âŒ |
| åŸºäºåœ°åŒºèŠ‚ç‚¹è¿‡æ»¤ | `regions` | ç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼šHK,US,JP | æ—  | âŒ |
| åŸºäºè®¡è´¹å€ç‡è¿‡æ»¤ | `rate` | åªä¿ç•™è®¡è´¹å€ç‡å°äºç­‰äºè¯¥å€¼çš„èŠ‚ç‚¹ | æ—  | âŒ |
| èŠ‚ç‚¹åç§°è¿‡æ»¤æ­£åˆ™ | `filter` | ç§»é™¤æ‰ä¸ç¬¦åˆè¯¥æ­£åˆ™çš„èŠ‚ç‚¹ï¼Œè¯¥å‚æ•°ä¼šä¼ å…¥ js çš„ `RegExp` | æ—  | âŒ |
| dns è®¾ç½® | `nameserver` | è®¾ç½® dns nameserver ç»„, æ”¯æŒ `direct` å’Œ `strict` | `strict` | âŒ |
| dns è§£æç­–ç•¥ | `rules` | æœªå‘½ä¸­è§„åˆ™æµé‡ dns è§£æç­–ç•¥ï¼Œæ”¯æŒ `always-resolve` å’Œ `remote` | `remote` | âŒ |
| ç¦ç”¨ quic | `quic` | ç¦ç”¨ quic | true | âŒ |
| æ—¥å¿—ç­‰çº§ | `level` | æ—¥å¿—ç­‰çº§ï¼Œæ”¯æŒ `debug`, `info`, `warning`, `error`, `silent` | `warning` | âŒ |

ä¸¤ç§ DNS ç­–ç•¥çš„æ’åˆ—ç»„åˆä¼šå½¢æˆä¸åŒçš„æ•ˆæœï¼Œæ ¹æ®å®é™…éœ€æ±‚æ¥åšé€‰æ‹©

> ğŸ”’ è¡¨ç¤ºä¸ä¼š DNS æ³„éœ²ï¼Œ âš ï¸ è¡¨ç¤ºæœ‰ç›¸å…³é£é™©ï¼Œä½†ä¸ä»£è¡¨ä¸€å®šæ³„éœ²ï¼Œå¦‚æœéœ€æ±‚åªæ˜¯å¯¹äºç»å¤§å¤šæ•°å¦‚ google åœ¨å†…çš„é»‘åå•ç½‘ç«™ä¸æ³„éœ²ï¼Œåˆ™å¯ä»¥å¿½è§†ç›¸å…³æ³„éœ²é£é™©

| rules / nameserver | `direct` | `strict` |
| ----------- | ------ | ------ |
| `always-resolve` | âš ï¸ `å›½å¤–æœªçŸ¥åŸŸåé€šè¿‡ direct dnsï¼Œæ³„éœ²` | ğŸ”’ `ç¼ºç‚¹åœ¨äºå›½å¤–å°ä¼—ç½‘ç«™ä¼šè¿›è¡Œå¤šä½™ DNS è§£æï¼Œå›½å†…å°ä¼—ç½‘ç«™å¯èƒ½æ— æ³•å‘½ä¸­æœ€ä¼˜ç»“æœï¼Œä½† ecs æœ‰æ‰€ç¼“è§£` |
| `remote` | ğŸ”’ `ç¼ºç‚¹åœ¨äºå›½å†…å°ä¼—ç½‘ç«™ä¼šèµ°ä»£ç†` | ğŸ”’ `ç¼ºç‚¹åœ¨äºå›½å†…å°ä¼—ç½‘ç«™ä¼šèµ°ä»£ç†` |

> ç›®å‰ Stash ä¸æ”¯æŒ `strict` ç­–ç•¥ï¼Œå¦‚æœæŒ‡å®š `strict` ç­–ç•¥ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢ä¸º `direct` ç­–ç•¥ã€‚å¦å¤–ä½¿ç”¨ `direct` ç­–ç•¥çš„åŒæ—¶æœ€å¥½æ‰“å¼€ `quic` é€‰é¡¹æ¥ç¦ç”¨ quic åè®®



## ğŸ’» Development

### å‰ç½®è¦æ±‚

1. å®‰è£… Node.js å’Œ `pnpm`ï¼ˆè¯·å…ˆå®‰è£… Node.jsï¼Œç„¶åå‚è§ [pnpm](https://pnpm.io) è·å– pnpm å®‰è£…è¯´æ˜ï¼‰

### å¼€å‘æ­¥éª¤

1. **å®‰è£…ä¾èµ–**
   ```bash
   pnpm install
   ```

2. **ç™»å½• Cloudflare**ï¼ˆé‡è¦ï¼ï¼‰
   ```bash
   pnpm exec wrangler login
   ```
   è¿™å°†æ‰“å¼€æµè§ˆå™¨è¿›è¡Œ Cloudflare è´¦æˆ·æˆæƒã€‚ç™»å½•åæ‰èƒ½è®¿é—® KV å­˜å‚¨å’Œéƒ¨ç½²æœåŠ¡ã€‚

3. **ç”Ÿæˆ Geo ç›¸å…³è„šæœ¬**
   ```bash
   pnpm run pb-gen && pnpm run pb-gen-dts
   ```

4. **ç”Ÿæˆ Cloudflare Workers ç±»å‹å®šä¹‰**
   ```bash
   pnpm run cf-typegen
   ```
   è¿™å°†æ ¹æ® `wrangler.jsonc` é…ç½®ç”Ÿæˆ TypeScript ç±»å‹å®šä¹‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬ KVã€ç¯å¢ƒå˜é‡ç­‰çš„ç±»å‹ã€‚

5. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   pnpm run dev
   ```
   å¼€å‘æœåŠ¡å™¨å°†åœ¨æœ¬åœ°å¯åŠ¨ï¼Œå¯ä»¥è¿›è¡Œè°ƒè¯•å’Œæµ‹è¯•ã€‚



## ğŸ¯ TODO

- [ ] 1. è¿ç§»åˆ° GEOSITE, é¿å…ä½¿ç”¨ classic behavior è§„åˆ™ï¼Œstash æ”¯æŒ `strict` ç­–ç•¥ 
- [ ] 2. æ£€æŸ¥ https://github.com/DustinWin/ShellCrash/blob/dev/public/fake_ip_filter.list ä»¥è¡¥å…¨ fake-ip-filter
- [ ] 3. subrequest è¢« cloudflare ç¼“å­˜

